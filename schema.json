{
  "openapi": "3.0.0",
  "info": { "version": "1.0.3", "title": "Oinkos" },
  "servers": [{ "url": "https://api.oinkos.samnsc.com" }],
  "tags": [],
  "paths": {
    "/user": {
      "get": {
        "description": "Get current user information",
        "operationId": "get_user",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "examples": {
                  "Successful Response": {
                    "value": {
                      "error": false,
                      "username": "samuel",
                      "id": "AC0F4E43-F4A7-4E56-93F2-C868DEEEDE16",
                      "email": "example@example.com",
                      "balance": 0
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "examples": {
                  "Invalid Bearer Token": {
                    "value": {
                      "error": true,
                      "reason": "JWTKitError(errorType: signatureVerificationFailed)"
                    }
                  },
                  "Unauthorized": {
                    "value": {
                      "error": true,
                      "reason": "Unauthorized"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "examples": {
                  "Malformed Bearer Token": {
                    "value": {
                      "reason": "Something went wrong.",
                      "error": true
                    }
                  }
                }
              }
            }
          }
        },
        "parameters": [],
        "security": [{ "BearerAuth": [] }]
      }
    },
    "/signup": {
      "post": {
        "description": "Create new user",
        "operationId": "get_signup",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "examples": {
                  "Successfully Created New User": {
                    "value": {
                      "error": false,
                      "token": "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0NEIyRTEyQi1CQ0U3LTQxQkEtOTQ3RC00MUQ1NTVBRTlFMkIiLCJleHBpcmF0aW9uIjoxNzQ3MzQ3NTYwLjU1ODU3OX0.ios5ERyZSrrhvduzKz1enGSHJbVw_4PJS5PmLpIIpB3TwKh0nV3AkTrXMzsLd0yCcw2ljGIMz-Bght3_gSqBdA"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "examples": {
                  "Malformed Request Body": {
                    "value": {
                      "error": true,
                      "reason": "Malformed syntax"
                    }
                  },
                  "Mismatched Password and Password Confirmation": {
                    "value": {
                      "error": true,
                      "reason": "Mismatched passwords"
                    }
                  },
                  "Non-unique Username": {
                    "value": {
                      "error": true,
                      "reason": "A user with that username already exists"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Content",
            "content": {
              "application/json": {
                "examples": {
                  "Invalid Value(s)": {
                    "value": {
                      "error": true,
                      "reason": "Invalid value(s)"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "examples": {
                  "Unknown Server Error": {
                    "value": {
                      "error": true,
                      "reason": "Internal Server Error"
                    }
                  },
                  "Failed to Save User": {
                    "value": {
                      "error": true,
                      "reason": "Failed to save user"
                    }
                  },
                  "Unable to Generate User Authentication Token": {
                    "value": {
                      "error": true,
                      "reason": "Unable to generate authentication token for user"
                    }
                  }
                }
              }
            }
          }
        },
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "username": { "type": "string" },
                  "email": { "type": "string" },
                  "password": { "type": "string" },
                  "confirmPassword": { "type": "string" }
                },
                "type": "object",
                "required": ["username", "email", "password", "confirmPassword"]
              }
            }
          }
        }
      }
    },
    "/login": {
      "post": {
        "description": "Get user authentication token from username and password",
        "operationId": "post_login",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "examples": {
                  "Successfull Login": {
                    "value": {
                      "error": false,
                      "token": "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0NEIyRTEyQi1CQ0U3LTQxQkEtOTQ3RC00MUQ1NTVBRTlFMkIiLCJleHBpcmF0aW9uIjoxNzQ3MzQ3NTYwLjU1ODU3OX0.ios5ERyZSrrhvduzKz1enGSHJbVw_4PJS5PmLpIIpB3TwKh0nV3AkTrXMzsLd0yCcw2ljGIMz-Bght3_gSqBdA"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "examples": {
                  "Invalid or Missing Credentials": {
                    "value": { "error": true, "reason": "Unauthorized" }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "examples": {
                  "Unable to Generate User Authentication Token": {
                    "value": {
                      "error": true,
                      "reason": "Unable to generate authentication token for user"
                    }
                  }
                }
              }
            }
          }
        },
        "parameters": [],
        "security": [{ "BasicAuth": [] }]
      }
    }
  },
  "components": {
    "securitySchemes": {
      "BearerAuth": { "type": "http", "scheme": "bearer" },
      "BasicAuth": { "type": "http", "scheme": "basic" }
    }
  }
}
